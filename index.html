<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Houssem GPA - Materials Count</title>
    <style>
        :root { --blue: #002868; --red: #bf0a30; --green: #2ecc71; --orange: #f39c12; }
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; }
        .container { background: white; padding: 15px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); width: 100%; max-width: 800px; border-top: 6px solid var(--blue); margin-bottom: 15px; box-sizing: border-box; }
        
        /* Ù…Ø¤Ù‚Øª Ø§Ù„Ø¨Ø§Ùƒ */
        .exam-timer { background: var(--blue); padding: 15px; border-radius: 10px; color: white; margin-bottom: 15px; text-align: center; }
        .countdown-wrapper { display: flex; justify-content: center; gap: 8px; direction: ltr; margin-top: 10px; }
        .time-box { background: rgba(255,255,255,0.1); padding: 8px; border-radius: 6px; min-width: 50px; }
        .time-box b { display: block; color: #f1c40f; font-size: 1.5em; }
        .time-box small { font-size: 0.6em; color: #ddd; }

        .selection-box { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; background: #eef2f7; padding: 15px; border-radius: 10px; }
        select { width: 100%; padding: 10px; border-radius: 6px; border: 2px solid var(--blue); font-weight: bold; }

        /* Ø´Ø§Ø±Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯ */
        .stats-bar { display: flex; justify-content: space-between; align-items: center; margin: 10px 0; padding: 10px; background: #fff; border-radius: 8px; border: 1px solid #ddd; }
        .subjects-count { background: var(--red); color: white; padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 0.9em; }

        .extra-options { display: flex; justify-content: center; gap: 20px; font-weight: bold; font-size: 0.9em; }
        .table-wrapper { width: 100%; overflow-x: auto; border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; min-width: 700px; }
        th, td { padding: 10px; border-bottom: 1px solid #eee; text-align: center; font-size: 0.85em; }
        th { background: #f8f9fa; color: var(--blue); }
        input[type="number"] { width: 45px; padding: 5px; border-radius: 4px; border: 1px solid #ccc; text-align: center; font-weight: bold; }
        .row-total { font-weight: bold; color: var(--red); background: #fff5f5; }

        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .btn { padding: 15px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; color: white; }
        .btn-calc { background: var(--red); grid-column: span 2; }
        .btn-save { background: var(--green); }
        .btn-restore { background: var(--orange); }
        #result-card { margin-top: 15px; padding: 15px; border-radius: 10px; text-align: center; display: none; font-weight: bold; color: white; font-size: 1.5em; }
    </style>
</head>
<body>

<div class="container">
    <h3 style="text-align:center; color:var(--red); margin-top:0;">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„ - Houssem ğŸ‡©ğŸ‡¿</h3>
    <div class="exam-timer">
        <span>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠØ§ 2026</span>
        <div class="countdown-wrapper">
            <div class="time-box"><b id="days">00</b><small>ÙŠÙˆÙ…</small></div>
            <div class="time-box"><b id="hours">00</b><small>Ø³Ø§Ø¹Ø©</small></div>
            <div class="time-box"><b id="mins">00</b><small>Ø¯Ù‚ÙŠÙ‚Ø©</small></div>
            <div class="time-box"><b id="secs">00</b><small>Ø«Ø§Ù†ÙŠØ©</small></div>
        </div>
    </div>

    <div class="selection-box">
        <div><label>Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</label>
            <select id="level" onchange="updateStreams()">
                <option value="1">1 Ø«Ø§Ù†ÙˆÙŠ</option>
                <option value="2">2 Ø«Ø§Ù†ÙˆÙŠ</option>
                <option value="3">3 Ø«Ø§Ù†ÙˆÙŠ</option>
            </select>
        </div>
        <div><label>Ø§Ù„Ø´Ø¹Ø¨Ø©:</label>
            <select id="stream" onchange="loadSubjects()"></select>
        </div>
    </div>

    <div class="stats-bar">
        <span>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
        <span class="subjects-count" id="sub-count">0</span>
    </div>

    <div class="extra-options">
        <label>Ø§Ù„Ø£Ù…Ø§Ø²ÙŠØºÙŠØ© <input type="checkbox" id="amz" onchange="loadSubjects()"></label>
        <label id="art-label">Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„ÙÙ†ÙŠØ© <input type="checkbox" id="art" onchange="loadSubjects()"></label>
    </div>
</div>

<div class="container">
    <div class="table-wrapper">
        <table>
            <thead><tr><th>Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>ØªÙ‚ÙˆÙŠÙ…</th><th>Ø§.ØªØ·Ø¨ÙŠÙ‚ÙŠØ©</th><th>ÙØ±Ø¶1</th><th>ÙØ±Ø¶2</th><th>Ø§Ø®ØªØ¨Ø§Ø±</th><th>Ù…Ø¹Ø§Ù…Ù„</th><th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th></tr></thead>
            <tbody id="m-body"></tbody>
        </table>
    </div>
    <div class="btn-group">
        <button class="btn btn-calc" onclick="calculate()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ğŸš€</button>
        <button class="btn btn-save" onclick="save()">Ø­ÙØ¸ âœ…</button>
        <button class="btn btn-restore" onclick="restore()">Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ğŸ”„</button>
    </div>
    <div id="result-card"></div>
</div>

<script>
    const data = {
        "1": { "Ø¬Ø°Ø¹ Ù…Ø´ØªØ±Ùƒ Ø¹Ù„ÙˆÙ…": [["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",5],["ÙÙŠØ²ÙŠØ§Ø¡",4],["Ø¹Ù„ÙˆÙ…",4],["Ø¹Ø±Ø¨ÙŠØ©",3],["ÙØ±Ù†Ø³ÙŠØ©",2],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",2],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",2],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§",2],["Ø¥Ø¹Ù„Ø§Ù… Ø¢Ù„ÙŠ",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "Ø¬Ø°Ø¹ Ù…Ø´ØªØ±Ùƒ Ø¢Ø¯Ø§Ø¨": [["Ø¹Ø±Ø¨ÙŠØ©",5],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",4],["ÙØ±Ù†Ø³ÙŠØ©",3],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",3],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",2],["ÙÙŠØ²ÙŠØ§Ø¡",2],["Ø¹Ù„ÙˆÙ…",2],["Ø¥Ø¹Ù„Ø§Ù… Ø¢Ù„ÙŠ",2],["Ø±ÙŠØ§Ø¶Ø©",1]] },
        "2": { "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±ÙŠØ¨ÙŠØ©": [["Ø¹Ù„ÙˆÙ…",6],["ÙÙŠØ²ÙŠØ§Ø¡",5],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",5],["Ø¹Ø±Ø¨ÙŠØ©",3],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",2],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["ÙÙ„Ø³ÙØ©",2],["ÙØ±Ù†Ø³ÙŠØ©",2],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "Ø±ÙŠØ§Ø¶ÙŠØ§Øª": [["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",7],["ÙÙŠØ²ÙŠØ§Ø¡",6],["Ø¹Ù„ÙˆÙ…",2],["Ø¹Ø±Ø¨ÙŠØ©",3],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",2],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["ÙÙ„Ø³ÙØ©",2],["ÙØ±Ù†Ø³ÙŠØ©",2],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "ØªÙ‚Ù†ÙŠ Ø±ÙŠØ§Ø¶ÙŠ": [["ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§",7],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",6],["ÙÙŠØ²ÙŠØ§Ø¡",5],["Ø¹Ø±Ø¨ÙŠØ©",3],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",2],["ÙÙ„Ø³ÙØ©",2],["ÙØ±Ù†Ø³ÙŠØ©",2],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "ØªØ³ÙŠÙŠØ± ÙˆØ§Ù‚ØªØµØ§Ø¯": [["ØªØ³ÙŠÙŠØ±",6],["Ø§Ù‚ØªØµØ§Ø¯",5],["Ù‚Ø§Ù†ÙˆÙ†",2],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",5],["Ø¹Ø±Ø¨ÙŠØ©",3],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",4],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "Ø¢Ø¯Ø§Ø¨ ÙˆÙÙ„Ø³ÙØ©": [["ÙÙ„Ø³ÙØ©",5],["Ø¹Ø±Ø¨ÙŠØ©",5],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",4],["ÙØ±Ù†Ø³ÙŠØ©",3],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",3],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "Ù„ØºØ§Øª Ø£Ø¬Ù†Ø¨ÙŠØ©": [["Ø¹Ø±Ø¨ÙŠØ©",4],["ÙØ±Ù†Ø³ÙŠØ©",4],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",4],["Ù„ØºØ© 3",4],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",2],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["ÙÙ„Ø³ÙØ©",2],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",2],["Ø±ÙŠØ§Ø¶Ø©",1]] },
        "3": { "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±ÙŠØ¨ÙŠØ©": [["Ø¹Ù„ÙˆÙ…",6],["ÙÙŠØ²ÙŠØ§Ø¡",5],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",5],["Ø¹Ø±Ø¨ÙŠØ©",3],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",2],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["ÙÙ„Ø³ÙØ©",2],["ÙØ±Ù†Ø³ÙŠØ©",2],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "Ø¢Ø¯Ø§Ø¨ ÙˆÙÙ„Ø³ÙØ©": [["ÙÙ„Ø³ÙØ©",6],["Ø¹Ø±Ø¨ÙŠØ©",6],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",4],["ÙØ±Ù†Ø³ÙŠØ©",3],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",3],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "Ù„ØºØ§Øª Ø£Ø¬Ù†Ø¨ÙŠØ©": [["Ø¹Ø±Ø¨ÙŠØ©",5],["ÙØ±Ù†Ø³ÙŠØ©",4],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",4],["Ù„ØºØ© 3",4],["ÙÙ„Ø³ÙØ©",2],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",2],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "ØªØ³ÙŠÙŠØ± ÙˆØ§Ù‚ØªØµØ§Ø¯": [["ØªØ³ÙŠÙŠØ±",6],["Ø§Ù‚ØªØµØ§Ø¯",5],["Ù‚Ø§Ù†ÙˆÙ†",2],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",5],["Ø¹Ø±Ø¨ÙŠØ©",3],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",4],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "ØªÙ‚Ù†ÙŠ Ø±ÙŠØ§Ø¶ÙŠ": [["ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§",7],["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",6],["ÙÙŠØ²ÙŠØ§Ø¡",6],["Ø¹Ø±Ø¨ÙŠØ©",3],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",2],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["ÙÙ„Ø³ÙØ©",2],["ÙØ±Ù†Ø³ÙŠØ©",2],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",2],["Ø±ÙŠØ§Ø¶Ø©",1]], "Ø±ÙŠØ§Ø¶ÙŠØ§Øª": [["Ø±ÙŠØ§Ø¶ÙŠØ§Øª",7],["ÙÙŠØ²ÙŠØ§Ø¡",6],["Ø¹Ù„ÙˆÙ…",2],["Ø¹Ø±Ø¨ÙŠØ©",3],["Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª",2],["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",2],["ÙÙ„Ø³ÙØ©",2],["ÙØ±Ù†Ø³ÙŠØ©",2],["Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©",2],["Ø±ÙŠØ§Ø¶Ø©",1]] }
    };

    function updateStreams() {
        const lvl = document.getElementById("level").value;
        const sSelect = document.getElementById("stream");
        document.getElementById("art-label").style.display = (lvl === "1") ? "inline-flex" : "none";
        sSelect.innerHTML = "";
        for (let s in data[lvl]) {
            let opt = document.createElement("option"); opt.value = s; opt.innerText = s;
            sSelect.appendChild(opt);
        }
        loadSubjects();
    }

    function loadSubjects() {
        const lvl = document.getElementById("level").value, stm = document.getElementById("stream").value;
        if (!data[lvl][stm]) return;
        let subjects = [...data[lvl][stm]];
        if (document.getElementById("amz").checked) subjects.push(["Ø£Ù…Ø§Ø²ÙŠØºÙŠØ©", 2]);
        if (lvl === "1" && document.getElementById("art").checked) subjects.push(["ØªØ±Ø¨ÙŠØ© ÙÙ†ÙŠØ©", 1]);

        // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯
        document.getElementById("sub-count").innerText = subjects.length;

        let html = "";
        subjects.forEach(s => {
            html += `<tr data-coef="${s[1]}"><td>${s[0]}</td><td><input type="number" oninput="u(this)"></td><td><input type="number" oninput="u(this)"></td><td><input type="number" oninput="u(this)"></td><td><input type="number" oninput="u(this)"></td><td><input type="number" oninput="u(this)"></td><td>${s[1]}</td><td class="row-total">0.00</td></tr>`;
        });
        document.getElementById("m-body").innerHTML = html;
    }

    function u(el) {
        if(el.value>20) el.value=20; if(el.value<0) el.value=0;
        const row = el.closest('tr'), ins = row.querySelectorAll('input'), coef = parseFloat(row.dataset.coef);
        let sc = 0, count = 0;
        for(let i=0; i<4; i++) { let v = parseFloat(ins[i].value); if(!isNaN(v)) { sc += v; count++; } }
        let avg = ((count>0 ? sc/count : 0) + (parseFloat(ins[4].value)||0)*2)/3;
        row.querySelector('.row-total').innerText = (avg * coef).toFixed(2);
    }

    function calculate() {
        let tP = 0, tC = 0;
        document.querySelectorAll("#m-body tr").forEach(row => { tP += parseFloat(row.querySelector('.row-total').innerText); tC += parseFloat(row.dataset.coef); });
        let res = document.getElementById("result-card"); res.style.display = "block";
        let final = tP/tC; res.style.background = final>=10 ? "#2ecc71" : "#e74c3c";
        res.innerText = isNaN(final) ? "Ø£Ø¯Ø®Ù„ Ø§Ù„Ù†Ù‚Ø§Ø·" : "Ø§Ù„Ù…Ø¹Ø¯Ù„: " + final.toFixed(2);
    }

    function save() {
        let s = { lvl: document.getElementById("level").value, stm: document.getElementById("stream").value, scores: [] };
        document.querySelectorAll("#m-body input").forEach(i => s.scores.push(i.value));
        localStorage.setItem("H_BAC_DATA_V5", JSON.stringify(s)); alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ âœ…");
    }

    function restore() {
        let d = JSON.parse(localStorage.getItem("H_BAC_DATA_V5")); if(!d) return alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª");
        document.getElementById("level").value = d.lvl; updateStreams(); document.getElementById("stream").value = d.stm; loadSubjects();
        setTimeout(() => { document.querySelectorAll("#m-body input").forEach((i, idx) => { i.value = d.scores[idx]; u(i); }); }, 150);
    }

    function updateTimer() {
        const target = new Date('June 7, 2026 08:00:00').getTime();
        const now = new Date().getTime();
        const diff = target - now;
        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const s = Math.floor((diff % (1000 * 60)) / 1000);
        document.getElementById("days").innerText = d; document.getElementById("hours").innerText = h;
        document.getElementById("mins").innerText = m; document.getElementById("secs").innerText = s;
    }
    setInterval(updateTimer, 1000); updateTimer(); updateStreams();
</script>
</body>
</html>


