<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Houssem GPA Ultimate</title>
    <style>
        :root { --main-blue: #002868; --main-red: #bf0a30; --green: #2ecc71; --orange: #f39c12; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: #f0f2f5; display: flex; flex-direction: column; align-items: center; padding: 10px; margin: 0; }
        .container { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.15); width: 100%; max-width: 900px; border-top: 8px solid var(--main-blue); margin-bottom: 20px; }
        h2 { color: var(--main-red); text-align: center; margin-bottom: 15px; }
        .timer-box { display: flex; justify-content: space-around; background: var(--main-blue); color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center; }
        .timer-box div b { display: block; color: #f1c40f; font-size: 1.2em; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 0.85em; }
        th, td { padding: 10px; border-bottom: 1px solid #ddd; text-align: center; }
        th { background: #f8f9fa; color: var(--main-blue); }
        input { width: 45px; padding: 5px; border-radius: 5px; border: 1px solid #ccc; text-align: center; font-weight: bold; }
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .btn { padding: 15px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; color: white; font-size: 1em; }
        .btn-calc { background: var(--main-red); grid-column: span 2; font-size: 1.2em; margin-bottom: 5px; }
        .btn-save { background: var(--green); }
        .btn-restore { background: var(--orange); }
        #result-card { margin-top: 20px; padding: 20px; border-radius: 10px; text-align: center; display: none; font-size: 1.5em; font-weight: bold; color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ‡©ğŸ‡¿ Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª 2026</h2>
    <div class="timer-box">
        <div>BEM 2026<b id="bem-count">--</b></div>
        <div>BAC 2026<b id="bac-count">--</b></div>
    </div>
</div>

<div class="container">
    <h2>ğŸ“Š Ø­Ø§Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„</h2>
    <table>
        <thead>
            <tr>
                <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
                <th>ØªÙ‚ÙˆÙŠÙ…</th>
                <th> Ø§.ØªØ·Ø¨ÙŠÙ‚ÙŠØ©</th>
                <th>ÙØ±Ø¶1</th>
                <th>ÙØ±Ø¶2</th>
                <th>Ø§Ø®ØªØ¨Ø§Ø±</th>
                <th>Ù…Ø¹Ø§Ù…Ù„</th>
            </tr>
        </thead>
        <tbody id="main-table">
            <tr data-subject="ar"><td>Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</td><td><input type="number" class="val-t"></td><td><input type="number" class="val-a"></td><td><input type="number" class="val-f1"></td><td><input type="number" class="val-f2"></td><td><input type="number" class="val-ex"></td><td class="coef">3</td></tr>
            <tr data-subject="ma"><td>Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</td><td><input type="number" class="val-t"></td><td><input type="number" class="val-a"></td><td><input type="number" class="val-f1"></td><td><input type="number" class="val-f2"></td><td><input type="number" class="val-ex"></td><td class="coef">5</td></tr>
            <tr data-subject="ph"><td>Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡</td><td><input type="number" class="val-t"></td><td><input type="number" class="val-a"></td><td><input type="number" class="val-f1"></td><td><input type="number" class="val-f2"></td><td><input type="number" class="val-ex"></td><td class="coef">4</td></tr>
            <tr data-subject="sc"><td>Ø§Ù„Ø¹Ù„ÙˆÙ…</td><td><input type="number" class="val-t"></td><td><input type="number" class="val-a"></td><td><input type="number" class="val-f1"></td><td><input type="number" class="val-f2"></td><td><input type="number" class="val-ex"></td><td class="coef">4</td></tr>
            <tr data-subject="en"><td>Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</td><td><input type="number" class="val-t"></td><td><input type="number" class="val-a"></td><td><input type="number" class="val-f1"></td><td><input type="number" class="val-f2"></td><td><input type="number" class="val-ex"></td><td class="coef">2</td></tr>
            <tr data-id="fr"><td>Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©</td><td><input type="number" class="val-t"></td><td><input type="number" class="val-a"></td><td><input type="number" class="val-f1"></td><td><input type="number" class="val-f2"></td><td><input type="number" class="val-ex"></td><td class="coef">2</td></tr>
            <tr data-id="hg"><td>ØªØ§Ø±ÙŠØ® ÙˆØ¬ØºØ±Ø§ÙÙŠØ§</td><td><input type="number" class="val-t"></td><td><input type="number" class="val-a"></td><td><input type="number" class="val-f1"></td><td><input type="number" class="val-f2"></td><td><input type="number" class="val-ex"></td><td class="coef">2</td></tr>
            <tr data-id="is"><td>Ø¥Ø³Ù„Ø§Ù…ÙŠØ©</td><td><input type="number" class="val-t"></td><td><input type="number" class="val-a"></td><td><input type="number" class="val-f1"></td><td><input type="number" class="val-f2"></td><td><input type="number" class="val-ex"></td><td class="coef">2</td></tr>
            <tr data-id="pe"><td>Ø±ÙŠØ§Ø¶Ø©</td><td><input type="number" class="val-t"></td><td><input type="number" class="val-a"></td><td><input type="number" class="val-f1"></td><td><input type="number" class="val-f2"></td><td><input type="number" class="val-ex"></td><td class="coef">1</td></tr>
        </tbody>
    </table>

    <div class="btn-group">
        <button class="btn btn-calc" onclick="runCalculation()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¢Ù† ğŸš€</button>
        <button class="btn btn-save" onclick="runSave()">Ø­ÙØ¸ Ø§Ù„Ù†Ù‚Ø§Ø· âœ…</button>
        <button class="btn btn-restore" onclick="runRestore()">Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ù‚Ø§Ø· ğŸ”„</button>
    </div>

    <div id="result-card"></div>
</div>

<script>
    // --- ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯ ---
    function updateTimers() {
        const bemDate = new Date('June 1, 2026 08:00:00').getTime();
        const bacDate = new Date('June 8, 2026 08:00:00').getTime();
        const now = new Date().getTime();

        const calcTime = (target, id) => {
            let diff = target - now;
            if (diff < 0) { document.getElementById(id).innerHTML = "Ø¨Ø¯Ø£!"; return; }
            let d = Math.floor(diff / (1000 * 60 * 60 * 24));
            let h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            document.getElementById(id).innerHTML = d + " ÙŠÙˆÙ… Ùˆ " + h + " Ø³Ø§Ø¹Ø©";
        };
        calcTime(bemDate, 'bem-count');
        calcTime(bacDate, 'bac-count');
    }
    setInterval(updateTimers, 60000); updateTimers();

    // --- Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¯Ù‚ÙŠÙ‚ ---
    function runCalculation() {
        let totalPoints = 0;
        let totalCoef = 0;
        const rows = document.querySelectorAll("#main-table tr");

        rows.forEach(row => {
            const inputs = row.querySelectorAll("input");
            const t = parseFloat(inputs[0].value) || 0;
            const a = parseFloat(inputs[1].value) || 0;
            const f1 = parseFloat(inputs[2].value) || 0;
            const f2 = parseFloat(inputs[3].value) || 0;
            const ex = parseFloat(inputs[4].value) || 0;
            const c = parseFloat(row.querySelector(".coef").innerText);

            let sumCont = 0; let count = 0;
            [t, a, f1, f2].forEach(v => { if(v > 0) { sumCont += v; count++; } });
            
            let contAvg = count > 0 ? (sumCont / count) : 0;
            let subAvg = (contAvg + (ex * 2)) / 3;

            totalPoints += (subAvg * c);
            totalCoef += c;
        });

        const finalGPA = totalPoints / totalCoef;
        const display = document.getElementById("result-card");
        display.style.display = "block";
        display.style.backgroundColor = finalGPA >= 10 ? "#2ecc71" : "#e74c3c";
        display.innerHTML = "Ø§Ù„Ù…Ø¹Ø¯Ù„: " + finalGPA.toFixed(2);
    }

    // --- Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¢Ù…Ù† ---
    function runSave() {
        let storage = [];
        document.querySelectorAll("#main-table tr").forEach((row, index) => {
            let rowData = [];
            row.querySelectorAll("input").forEach(input => rowData.push(input.value));
            storage.push(rowData);
        });
        localStorage.setItem("HOUSSEM_DB_FINAL", JSON.stringify(storage));
        alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ù†Ø¬Ø§Ø­! âœ…");
    }

    function runRestore() {
        let rawData = localStorage.getItem("HOUSSEM_DB_FINAL");
        if (!rawData) { alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©!"); return; }
        
        let storage = JSON.parse(rawData);
        document.querySelectorAll("#main-table tr").forEach((row, rowIndex) => {
            let inputs = row.querySelectorAll("input");
            if (storage[rowIndex]) {
                storage[rowIndex].forEach((val, colIndex) => {
                    inputs[colIndex].value = val;
                });
            }
        });
        alert("ØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ù‚Ø§Ø·! ğŸ”„");
    }
</script>
</body>
</html>
